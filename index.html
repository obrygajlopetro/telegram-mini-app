<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ú–∏–Ω–∏-–º–∞–≥–∞–∑–∏–Ω</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
    }
    .product {
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 10px;
      margin-bottom: 20px;
    }
    .hidden {
      display: none;
    }
    #checkout {
      position: fixed;
      top: 10%;
      left: 50%;
      transform: translateX(-50%);
      background: #fff;
      border: 2px solid #333;
      padding: 20px;
      border-radius: 10px;
      z-index: 1000;
    }
    #overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 999;
    }
  </style>
</head>
<body>

  <h1>üõí –ú–∞–≥–∞–∑–∏–Ω —Ç–æ–≤–∞—Ä–æ–≤</h1>

  <div id="products"></div>

  <!-- –û–∫–Ω–æ –æ–ø–ª–∞—Ç—ã -->
  <div id="overlay" class="hidden"></div>
  <div id="checkout" class="hidden">
    <h2>üí≥ –û–ø–ª–∞—Ç–∞</h2>
    <p id="checkout-info"></p>
    <p>‚è≥ –¢–∞–π–º–µ—Ä: <span id="timer">15:00</span></p>
    <p>–ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –Ω–∞ –∫–∞—Ä—Ç—É: <b>1234 5678 9012 3456</b></p>
    <button onclick="closeCheckout()">–û—Ç–º–µ–Ω–∞</button>
  </div>

  <script>
    const products = [
      { id: 1, name: "–¢–æ–≤–∞—Ä 1", price: 1000 },
      { id: 2, name: "–¢–æ–≤–∞—Ä 2", price: 1500 },
      { id: 3, name: "–¢–æ–≤–∞—Ä 3", price: 2000 },
    ];

    const metros = ["–ü—É—à–∫–∏–Ω—Å–∫–∞—è", "–ß–∫–∞–ª–æ–≤—Å–∫–∞—è", "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∏–Ω—Å—Ç–∏—Ç—É—Ç"];

    const productsDiv = document.getElementById("products");

    products.forEach(product => {
      const div = document.createElement("div");
      div.className = "product";
      div.innerHTML = `
        <h3>${product.name}</h3>
        <p>–¶–µ–Ω–∞: ${product.price} ‚ÇΩ</p>
        <label>–ú–µ—Ç—Ä–æ:
          <select id="metro-${product.id}">
            ${metros.map(m => `<option value="${m}">${m}</option>`).join("")}
          </select>
        </label><br><br>
        <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:
          <input type="number" id="qty-${product.id}" min="1" value="1" />
        </label><br><br>
        <label>–¢–∏–ø –¥–æ—Å—Ç–∞–≤–∫–∏:
          <select id="delivery-${product.id}">
            <option value="pickup">–°–∞–º–æ–≤—ã–≤–æ–∑</option>
            <option value="delivery">–î–æ—Å—Ç–∞–≤–∫–∞</option>
          </select>
        </label><br><br>
        <button onclick="buy(${product.id})">–ö—É–ø–∏—Ç—å</button>
      `;
      productsDiv.appendChild(div);
    });

    function buy(productId) {
      const product = products.find(p => p.id === productId);
      const metro = document.getElementById(`metro-${productId}`).value;
      const qty = parseInt(document.getElementById(`qty-${productId}`).value);
      const delivery = document.getElementById(`delivery-${productId}`).value;
      const total = product.price * qty;

      // –ü–æ–∫–∞–∑–∞—Ç—å –æ–∫–Ω–æ –æ–ø–ª–∞—Ç—ã
      document.getElementById("overlay").classList.remove("hidden");
      document.getElementById("checkout").classList.remove("hidden");
      document.getElementById("checkout-info").innerText = `
        –¢–æ–≤–∞—Ä: ${product.name}
        \n–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: ${qty}
        \n–ú–µ—Ç—Ä–æ: ${metro}
        \n–¢–∏–ø –¥–æ—Å—Ç–∞–≤–∫–∏: ${delivery === "pickup" ? "–°–∞–º–æ–≤—ã–≤–æ–∑" : "–î–æ—Å—Ç–∞–≤–∫–∞"}
        \n–°—É–º–º–∞ –∫ –æ–ø–ª–∞—Ç–µ: ${total} ‚ÇΩ
      `.replace(/\n/g, "<br>");

      startTimer(15 * 60); // 15 –º–∏–Ω—É—Ç
    }

    function closeCheckout() {
      document.getElementById("overlay").classList.add("hidden");
      document.getElementById("checkout").classList.add("hidden");
    }

    let timerInterval;
    function startTimer(seconds) {
      clearInterval(timerInterval);
      let timeLeft = seconds;
      const timerSpan = document.getElementById("timer");

      timerInterval = setInterval(() => {
        const minutes = Math.floor(timeLeft / 60);
        const secs = timeLeft % 60;
        timerSpan.textContent = `${minutes}:${secs < 10 ? "0" : ""}${secs}`;
        timeLeft--;

        if (timeLeft < 0) {
          clearInterval(timerInterval);
          timerSpan.textContent = "–í—Ä–µ–º—è –≤—ã—à–ª–æ!";
        }
      }, 1000);
    }
  </script>

</body>
</html>
