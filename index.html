<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–í–∏—Ç—Ä–∏–Ω–∞</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: #f9f9f9; }
    h1 { font-size: 24px; margin-bottom: 20px; }
    .product { display: inline-block; width: 180px; margin: 10px; padding: 10px; background: white; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); vertical-align: top; }
    .product img { width: 100%; aspect-ratio: 1/1; object-fit: cover; border-radius: 6px; }
    .product select { margin-top: 10px; width: 100%; }
    .loader { text-align: center; margin-top: 20px; display: none; }
    .button { background: #4CAF50; color: white; padding: 10px 20px; margin: 10px 5px; border: none; border-radius: 5px; cursor: pointer; }
    .hidden { display: none; }
    .modal-bg { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; }
    .modal { background: white; padding: 20px; border-radius: 10px; text-align: center; width: 300px; }
  </style>
</head>
<body>

<div id="modal-bg" class="modal-bg">
  <div class="modal">
    <h2>–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥</h2>
    <select id="city-select">
      <option disabled selected>–ì–æ—Ä–æ–¥</option>
      <option>–ú–æ—Å–∫–≤–∞</option>
      <option>–ü–∏—Ç–µ—Ä</option>
    </select>
    <br><br>
    <select id="metro-select" class="hidden"></select>
    <br><br>
    <button class="button hidden" id="continue-btn">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
  </div>
</div>

<h1 id="title">–í–∏—Ç—Ä–∏–Ω–∞</h1>

<div id="loader" class="loader">‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞...</div>

<div id="products" class="hidden">
  <div class="product">
    <img src="https://placehold.co/200x200" />
    <div>
      <select>
        <option>1 —à—Ç.</option>
        <option>2 —à—Ç.</option>
        <option>3 —à—Ç.</option>
        <option>4 —à—Ç.</option>
        <option>5 —à—Ç.</option>
      </select>
    </div>
  </div>
  <div class="product">
    <img src="https://placehold.co/200x200?text=–¢–æ–≤–∞—Ä+2" />
    <div>
      <select>
        <option>1 —à—Ç.</option>
        <option>2 —à—Ç.</option>
        <option>3 —à—Ç.</option>
        <option>4 —à—Ç.</option>
        <option>5 —à—Ç.</option>
      </select>
    </div>
  </div>
  <!-- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ —Ç–æ–≤–∞—Ä–æ–≤ -->
</div>

<div id="action-buttons" class="hidden">
  <button class="button" id="pay-btn">–û–ø–ª–∞—Ç–∏—Ç—å</button>
  <button class="button" id="check-btn">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–ø–ª–∞—Ç—É</button>
</div>

<div id="status" class="loader"></div>

<script>
const citySelect = document.getElementById('city-select');
const metroSelect = document.getElementById('metro-select');
const modalBg = document.getElementById('modal-bg');
const continueBtn = document.getElementById('continue-btn');
const loader = document.getElementById('loader');
const products = document.getElementById('products');
const title = document.getElementById('title');
const status = document.getElementById('status');
const payBtn = document.getElementById('pay-btn');
const checkBtn = document.getElementById('check-btn');
const actionButtons = document.getElementById('action-buttons');

const metros = {
  "–ú–æ—Å–∫–≤–∞": ["–ö—É—Ä—Å–∫–∞—è", "–ö–∏–µ–≤—Å–∫–∞—è", "–í–î–ù–•"],
  "–ü–∏—Ç–µ—Ä": ["–ü–ª–æ—â–∞–¥—å –í–æ—Å—Å—Ç–∞–Ω–∏—è", "–ì–æ—Å—Ç–∏–Ω—ã–π –¥–≤–æ—Ä", "–ù–µ–≤—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç"]
};

citySelect.addEventListener("change", () => {
  metroSelect.innerHTML = `<option disabled selected>–ú–µ—Ç—Ä–æ</option>`;
  metros[citySelect.value].forEach(m => {
    metroSelect.innerHTML += `<option>${m}</option>`;
  });
  metroSelect.classList.remove("hidden");
  continueBtn.classList.add("hidden");
});

metroSelect.addEventListener("change", () => {
  continueBtn.classList.remove("hidden");
});

continueBtn.addEventListener("click", () => {
  modalBg.style.display = "none";
  loader.style.display = "block";
  setTimeout(() => {
    loader.style.display = "none";
    products.classList.remove("hidden");
    actionButtons.classList.remove("hidden");
    title.textContent = "–í–∏—Ç—Ä–∏–Ω–∞ –¥–ª—è " + metroSelect.value;
  }, 1200);
});

payBtn.addEventListener("click", () => {
  status.style.display = "block";
  status.textContent = "üîÑ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–ø–ª–∞—Ç—ã...";
  setTimeout(() => {
    status.style.display = "none";
    alert("‚ùå –ü–ª–∞—Ç—ë–∂ –Ω–µ –Ω–∞–π–¥–µ–Ω. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–≤–∏—Ç–∞–Ω—Ü–∏—é –±–æ—Ç—É.");
  }, 2000);
});

checkBtn.addEventListener("click", () => {
  const code = Math.floor(10000 + Math.random() * 90000);
  status.textContent = "‚ôªÔ∏è –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–ª–∞—Ç–µ–∂–∞ #" + code;
  status.style.display = "block";
  setTimeout(() => {
    status.textContent = "‚ùå –ü–ª–∞—Ç—ë–∂ –Ω–µ –Ω–∞–π–¥–µ–Ω. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–≤–∏—Ç–∞–Ω—Ü–∏—é –±–æ—Ç—É.";
  }, 2000);
});
</script>
</body>
</html>
